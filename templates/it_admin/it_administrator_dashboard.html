{% extends 'base_it_admin.html' %}
{% load static %}

{% block content %}

    <section class="home-main">
        <div class="full-myteam-container">
            <div class="head-container">
                <h1><img style="margin-bottom: -9px;" src="https://img.icons8.com/color/35/null/dashboard-layout.png"/> My Dashboard</h1>
            </div>
            <div class="search-bar-container" style="width: 96%; text-align: center; background-color: #4ec5f5; padding: 10px; border-radius: 15px; margin-left: 2%;">
                <form>
                    <h1 style="float: left; color: rgb(255, 255, 255); font-weight: 300; margin-left: 1%;">Hi thereðŸ‘‹ <span style="color: #056a92; font-weight: 400;">{{ user.first_name }}</span>, Welcome to <span style="color: #056a92; font-weight: 400;">ORMS</span> Dashboard.. </h1>
                    <a href="#" style="margin-right: 5px; background-color: rgb(85, 85, 85); color: #ffffff; border: 1px solid rgb(85, 85, 85);" class="add-team-btn">Export as PDF  <i class="fa fa-file-pdf-o" aria-hidden="true"></i></a>
                </form>
            </div>
            <div class="analytics-metrics">
                <div class="box">
                    <canvas id="myChart"></canvas>
                </div>
                <div class="box">
                    <canvas id="myBarChart"></canvas>
                </div>
            </div>
            <div style="margin-top: auto; margin-bottom: auto;" class="card-box">
                <div class="analytics-card">
                    <div>
                        <div class="numbers">{{ completed_requests_count }}</div>
                        <div class="name">Count of total requests completed by you:</div>
                    </div>
                    <div class="icon">
                        <img src="https://img.icons8.com/color/48/null/task-completed.png"/>
                    </div>
                </div>
                <div class="analytics-card">
                    <div>
                        <div class="numbers">{{ processing_requests_count }}</div>
                        <div class="name">Count of total requests in processing:</div>
                    </div>
                    <div class="icon">
                        <img src="https://img.icons8.com/color/48/null/submit-progress--v1.png"/>
                    </div>
                </div>
                <div class="analytics-card">
                    <div>
                        <div class="numbers">{{ pending_requests_count }}</div>
                        <div class="name">Count of total requests in pending:</div>
                    </div>
                    <div class="icon">
                        <img src="https://img.icons8.com/color/48/null/data-pending.png"/>
                    </div>
                </div>
                <div class="analytics-card">
                    <div>
                        <div class="numbers">{{ get_count_of_desktop }}</div>
                        <div class="name">Desktops currently in use by all team members:</div>
                    </div>
                    <div class="icon">
                        <img src="https://img.icons8.com/color/48/null/workstation.png"/>
                    </div>
                </div>
                <div class="analytics-card">
                    <div>
                        <div class="numbers">{{ get_count_of_laptop }}</div>
                        <div class="name">Laptops currently in use by all team members:</div>
                    </div>
                    <div class="icon">
                        <img src="https://img.icons8.com/color/48/null/laptop--v1.png"/>
                    </div>
                </div>
                <div class="analytics-card">
                    <div>
                        <div class="numbers">{{ get_count_of_monitor }}</div>
                        <div class="name">Monitors currently in use by all team members:</div>
                    </div>
                    <div class="icon">
                        <img src="https://img.icons8.com/color/48/null/monitor--v1.png"/>
                    </div>
                </div>
            </div>
            </div> 
            <div class="loader-wrapper">
                <lottie-player src="https://assets2.lottiefiles.com/packages/lf20_vpbloexe.json"  background="transparent"  speed="1"  style="width: 300px; height: 300px;"  loop  autoplay></lottie-player>
            </div>                
    </section>

    <!-- charts-mertrics start -->

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script>

        // for piechart

        var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'polarArea',
            data: {
                labels: ['Desktops', 'Laptops', 'Monitors'],
                datasets: [{
                    label: '# of Count',
                    data: [{{ total_desktops_count }}, {{ total_laptops_count }}, {{ total_monitors_count }}],
                    backgroundColor: [
                        'rgba(16, 196, 104, 0.2)',
                        'rgba(201, 36, 227, 0.2)',
                        'rgba(43, 44, 47, 0.2)'
                    ],
                    borderColor: [
                        'rgba(16, 196, 104, 1)',
                        'rgba(201, 36, 227, 1)',
                        'rgba(43, 44, 47, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                plugins: {
                    title: {
                        display: true,
                        text: 'PieChart Of Total Number Of Devices'
                        },
                    },
                    responsive: true,
            }
        });

        // for barchart

        var myBarChart = document.getElementById('myBarChart').getContext('2d');
        var myChart = new Chart(myBarChart, {
            type: 'bar',
            data: {
                labels: ['Available' ,'Taken', 'Reserved', 'Configuration'],
                datasets: [{
                    label: 'Desktop',
                    data: [{{ available_desktops_count }}, {{ taken_desktops_count }}, {{ reserved_desktops_count }}, {{ configuration_desktops_count }}],
                     backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(255, 99, 132, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 99, 132, 1)'
                    ],
                    borderWidth: 1
                },{
                    label: 'Laptop',
                    data: [{{ available_laptops_count }}, {{ taken_laptops_count }}, {{ reserved_laptops_count }}, {{ configuration_laptops_count }}],
                    backgroundColor: [
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                        'rgba(54, 162, 235, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }
                ,{
                    label: 'Monitor',
                    data: [{{ available_monitors_count }}, {{ taken_monitors_count }}, {{ reserved_monitors_count }}, {{ configuration_monitors_count }}],
                    backgroundColor: [
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(255, 206, 86, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 206, 86, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(255, 206, 86, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                plugins: {
                    title: {
                        display: true,
                        text: 'Stacked Barchart Of Devices Status'
                        },
                    },
                    responsive: true,
                scales: {
                    x: {
                        stacked: true,
                    },
                    y: {
                        stacked: true
                    }
                }
            }
        });

    </script>

        <!-- charts-mertrics over -->

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script src="{% static 'script.js' %}"></script>
    <script>
            $(window).on("load",function(){
              $(".loader-wrapper").fadeOut("slow");
            });
    </script>

{% endblock %}